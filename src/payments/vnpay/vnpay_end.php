<?php/** * @package	HikaShop for Joomla! * @version	2.6.3 * @author	hikashop.com * @copyright	(C) 2010-2016 HIKARI SOFTWARE. All rights reserved. * @license	GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html */defined('_WOO_BOOKING_EXEC') or die('Restricted access');$vnp_TmnCode = "13UFWHWY"; //Mã website tại VNPAY$vnp_HashSecret = "YCZJDFGYMWRLBTSFOSNHIENCNLHHIQCM"; //Chuỗi bí mật$vnp_Url = "http://sandbox.vnpayment.vn/paymentv2/vpcpay.html";$vnp_Returnurl = "http://localhost/vnpay_php/vnpay_return.php";$inputData=array();foreach ($this->vars as $key => $value) {    if (strpos($key, 'vnp_') !== false) {        $inputData[$key]=$value;    }}ksort($inputData);$query = "";$i = 0;$hashdata = "";foreach ($inputData as $key => $value) {    if ($i == 1) {        $hashdata .= '&' . $key . "=" . $value;    } else {        $hashdata .= $key . "=" . $value;        $i = 1;    }    $query .= urlencode($key) . "=" . urlencode($value) . '&';}$vnp_Url = $vnp_Url . "?" . $query;if (isset($vnp_HashSecret)) {    $vnpSecureHash = md5($vnp_HashSecret . $hashdata);    $vnp_Url .= 'vnp_SecureHashType=MD5&vnp_SecureHash=' . $vnpSecureHash;}$returnData = array('code' => '00', 'message' => 'success', 'data' => $vnp_Url);?><!-- Modal --><div class="modal fade" id="vnpay-modal" tabindex="-1" role="dialog" aria-labelledby="vnpay-modal" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-body">                <iframe  id="iframe-vnpay" src="<?php echo $vnp_Url ?>" width="780" height="600" frameborder="0" allowtransparency="true"></iframe>            </div>        </div>        <!-- /.modal-content -->    </div>    <!-- /.modal-dialog --></div><!-- /.modal --><?php$js_content = '';$doc = JFactory::getDocument();ob_start();?><script type="text/javascript">    jQuery(document).ready(function ($) {        $("#vnpay-modal").modal(            {backdrop: 'static', keyboard: false}        );    });</script><?php$js_content = ob_get_clean();$js_content = JUtility::remove_string_javascript($js_content);$doc->addScriptDeclaration($js_content);